(function ($) { $.fn.KheyaMenu = function (options) { var settings = $.extend({ menuclass: "menu", addMenuclass: "", theme: "CornflowerBlue", addContainer: "false", float: "left" }, options); if (settings.addContainer == "true") { this.addClass("container") } this.parent(".menucontainer").addClass(settings.theme); this.prepend('<div id="menu-button"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></div>'); this.find("ul." + settings.menuclass).addClass("KheyaHMenu"); this.find("ul." + settings.menuclass).addClass(settings.addMenuclass); if (settings.float == "left") { this.find("ul." + settings.menuclass).addClass("navbar-left") } else { this.find("ul." + settings.menuclass).addClass("navbar-right") } return this.each(function () { $(window).resize(function () { if ($(window).width() >= 768) { $("ul.KheyaHMenu").removeAttr("Style"); $("ul.KheyaHMenu").find('li ul').removeAttr("Style"); $("ul.KheyaHMenu").find('a').removeClass("menu-active") } }); $(document).ready(function ($) { $("ul.KheyaHMenu").find('li.active').parents(".has-sub-munu, .has-child-munu").addClass('active') }); $(this).find("#menu-button").click(function () { $(this).parent().find("ul.KheyaHMenu").toggle() }); $(this).find("ul.KheyaHMenu").children('li:first').addClass("top-child"); $(this).find("ul.KheyaHMenu").children('li').children("ul").parent().addClass('has-sub-munu'); $(this).find("ul.KheyaHMenu").find('ul li ul').parent().addClass('has-child-munu'); $(this).find("ul.KheyaHMenu").find('li ul').parent().click(function (event) { if ($(window).width() <= 768) { if ($(this).hasClass("menu-active")) { $(this).removeClass("menu-active"); $(this).children("ul li:first-child a:first-child").removeClass("first-child"); $(this).children("ul").toggle(); event.stopPropagation() } else { $(this).parent().find("ul").each(function (index) { if ($(this).parent().hasClass("menu-active")) { $(this).parent().removeClass("menu-active"); $(this).toggle() } }); $(this).addClass("menu-active"); $(this).children("ul").find("li:first a:first").addClass("first-child"); $(this).children("ul").toggle(); event.stopPropagation() } } }); $(this).find("ul.KheyaHMenu").find('li').hover(function () { if ($(window).width() >= 768) { var p = $(this); var offset = p.offset(); if (offset.left <= $(window).width() - 220) { $(this).children("ul").removeClass("floatRight"); $(this).children("ul").addClass("floatLeft"); $(this).children("ul").css("z-index", "10") } else { $(this).children("ul").removeClass("floatLeft"); $(this).children("ul").addClass("floatRight"); $(this).children("ul").css("z-index", "10") } $(".header").html("left: " + offset.left + ", top: " + offset.top) } }); $(this).find("ul.KheyaHMenu").find('li ul li').hover(function () { if ($(window).width() >= 768) { var p = $(this); var offset = p.offset(); if (offset.left <= $(window).width() - 420) { $(this).children("ul").removeClass("floatRight"); $(this).children("ul").addClass("floatLeft"); $(this).children("ul").css("z-index", $(this).parent("ul").css("z-index") + 1) } else { $(this).children("ul").removeClass("floatLeft"); $(this).children("ul").addClass("floatRight"); $(this).children("ul").css("z-index", $(this).parent("ul").css("z-index") + 1) } $(".header").html($(this).css("z-index")) } }) }) } }(jQuery)); jQuery(document).ready(function ($) { $(".menuwrapper").KheyaMenu({ menuclass: "navbar-nav", addMenuclass: "nav navbar-nav", addContainer: "true", float: "right" }) });